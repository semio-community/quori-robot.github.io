import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.CtNveh2g.js";import{E}from"./EventCard.CuML9gKH.js";import{S as b}from"./Section.C03Kg9L9.js";import"./site.config.5hJaM7Mh.js";import"./clsx.D1NWzQu2.js";import"./SettingsMinimalistic.CL3WYMWm.js";import"./links.3gMmpz3u.js";import"./index.CCGikcai.js";import"./index.COIpsGCK.js";import"./CpuBolt.BD1YGDoH.js";const N=({items:m,initialCount:p,viewAllText:v,renderItem:j})=>{const[r,n]=c.useState(!1),g=c.useRef(null),u=c.useRef(!1),l=c.useRef(r);return c.useEffect(()=>{if(!u.current){u.current=!0,l.current=r;return}if(l.current&&!r&&g.current){const i=g.current.getBoundingClientRect().top+window.scrollY-100;window.scrollTo({top:i,behavior:"smooth"})}l.current=r},[r]),a.jsxs("div",{ref:g,"data-expandable-section":!0,"data-initial-count":p.toString(),children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6","data-items-container":!0,children:m.map((i,o)=>a.jsx("div",{"data-expandable-item":!0,"data-index":o,className:o>=p&&!r?"hidden":"",children:j(i,o)},i.id??o))}),m.length>p&&a.jsx("div",{className:"text-center mt-6",children:a.jsxs("button",{"data-expand-button":!0,onClick:()=>n(i=>!i),className:"inline-flex items-center gap-2 px-6 py-3 bg-accent-base/10 hover:bg-accent-base/20 rounded-lg font-medium text-accent-base transition-all",children:[a.jsx("span",{"data-expand-text":!0,className:r?"hidden":"",children:v}),a.jsx("span",{"data-collapse-text":!0,className:r?"":"hidden",children:"Show Less"}),a.jsx("svg",{className:"w-4 h-4 transition-transform","data-expand-icon":!0,style:{transform:r?"rotate(180deg)":"rotate(0deg)"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M12 15l-4-4h8l-4 4z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})},V=({events:m,initialFeaturedCount:p=6,initialPastCount:v=6,className:j})=>{const r=c.useMemo(()=>new Date,[]),n=e=>e?e instanceof Date?e:new Date(e):void 0,g=e=>{const d=n(e.data.startDate),x=n(e.data.endDate)??d;return r>x?"past":r>=d&&r<=x?"ongoing":"upcoming"},u=e=>({...e,data:{...e.data,startDate:n(e.data.startDate),endDate:n(e.data.endDate)}}),{featuredEvents:l,upcomingEvents:i,pastEvents:o,upcomingByYear:D}=c.useMemo(()=>{const e=m.map(t=>({raw:t,status:g(t),start:n(t.data.startDate),end:n(t.data.endDate)??n(t.data.startDate),isFeaturedFlag:!!t.data.featured})),d=e.filter(t=>t.status==="ongoing"),x=e.filter(t=>t.isFeaturedFlag&&t.start>r),h=new Map;for(const t of d)h.set(t.raw.id,t);for(const t of x)h.has(t.raw.id)||h.set(t.raw.id,t);const F=Array.from(h.values()).sort((t,s)=>t.start.getTime()-s.start.getTime()).map(t=>u(t.raw)),y=e.filter(t=>t.end>=r).sort((t,s)=>t.start.getTime()-s.start.getTime()).map(t=>u(t.raw)),S=e.filter(t=>t.end<r).sort((t,s)=>s.start.getTime()-t.start.getTime()).map(t=>u(t.raw)),w=y.reduce((t,s)=>{const f=s.data.startDate.getFullYear().toString();return t[f]=t[f]||[],t[f].push(s),t},{});return Object.keys(w).forEach(t=>{const s=w[t];s&&s.sort((f,R)=>f.data.startDate.getTime()-R.data.startDate.getTime())}),{featuredEvents:F,upcomingEvents:y,pastEvents:S,upcomingByYear:w}},[m,r]),T=(...e)=>e.filter(Boolean).join(" ");return a.jsxs("div",{className:T("flex flex-col gap-10",j),children:[l.length>0&&a.jsx(b,{id:"featured",title:"Featured Events",subtitle:"Highlighted events, including events happening right now",variant:"primary",children:a.jsx(N,{items:l,initialCount:p,viewAllText:`View All ${l.length} Featured & Current Events`,renderItem:e=>a.jsx(E,{eventId:e.id,data:e.data},e.id)})}),i.length>0&&a.jsx(b,{id:"upcoming",title:"Upcoming Events",subtitle:"Meet with the community at these future gatherings",variant:"secondary",children:a.jsx("div",{className:"flex flex-col gap-8",children:Object.keys(D).sort().map(e=>a.jsxs("div",{className:"mb-2",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold mb-4 gradient-brand-text",children:e}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(D[e]??[]).map(d=>a.jsx(E,{eventId:d.id,data:d.data},d.id))})]},e))})}),o.length>0&&a.jsx(b,{id:"past",title:"Past Events",subtitle:"Explore our full archive of previous community events",variant:"tertiary",children:a.jsx(N,{items:o,initialCount:v,viewAllText:`View All ${o.length} Past Events`,renderItem:e=>a.jsx(E,{eventId:e.id,data:e.data},e.id)})})]})};export{V as default};
//# sourceMappingURL=EventsSections.Dk-egfUR.js.map
